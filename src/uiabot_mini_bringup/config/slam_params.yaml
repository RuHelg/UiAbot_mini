slam_toolbox:
  ros__parameters:
    
    # Map and Frame Parameters
    map_frame: map                 # Global map frame published by the SLAM node.
    odom_frame: odom               # Odometry frame published/used by odometry/SLAM.
    base_frame: base_link          # Robot base frame name (child frame of odom).
    scan_topic: /scan              # Topic name to receive laser/scan data (sensor_msgs/LaserScan).
    debug_logging: false           # If true, enables additional debug logging output.

    # SLAM Parameters
    mode: mapping                  # Operating mode: "mapping" builds/updates a map, "localization" loads+localizes to an existing map.
    enable_interactive_mode: true  # If true, allows interactive tools/commands (e.g., pausing, adjusting parameters).
    resolution: 0.05               # Map resolution in meters per cell.
    max_laser_range: 12.0          # Maximum laser range to consider (meters); measurements beyond ignored.
    use_sim_time: false            # If true, use /clock (for simulation); false uses wall time.
    
    # Time and Update Parameters
    map_update_interval: 1.0       # Seconds between saving/updating the map on disk or internal map updates.
    minimum_time_interval: 0.033    #  Minimum time between processing successive scans (seconds) (30 Hz).
    transform_publish_period: 0.033 #  Period (s) between publishing TF transforms from the SLAM node (30 Hz).
    
    tf_buffer_duration: 30.0       # Duration (s) of TF buffer used to lookup transforms.
    transform_timeout: 2.0         # Increased timeout for transform lookups
    stack_size_to_use: 40000000    # Stack size for internal threads (advanced; affects memory/stack overflows).
    
    # Plugin params
    solver_plugin: solver_plugins::CeresSolver   # Plugin class used for pose-graph optimization/solver.
    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY  # Linear solver type for Ceres (affects speed/accuracy).
    ceres_preconditioner: SCHUR_JACOBI           # Preconditioner used by the solver to accelerate convergence.
    ceres_trust_strategy: LEVENBERG_MARQUARDT    # Trust-region strategy for Ceres optimization.
    ceres_dogleg_type: TRADITIONAL_DOGLEG        # Dogleg algorithm variant for nonlinear solves.
    ceres_loss_function: None                    # Loss function to reduce effect of outliers (None => no robust loss).
    
    # General Parameters
    use_scan_matching: true                  # Enable scan-matching between consecutive scans for odometry.
    use_scan_barycenter: true                # Use scan barycenter for initial pose estimates (helps align scans).
    minimum_travel_distance: 0.2             # Minimum linear distance (m) robot must travel before adding new keyframe/scan.
    minimum_travel_heading: 0.2              # Minimum rotation (rad) before adding a new keyframe/scan.
    scan_buffer_size: 10                     # Number of recent scans to keep in buffer for scan matching/loop closure.
    scan_buffer_maximum_scan_distance: 10.0  # Maximum distance (m) within a scan to be buffered/used.
    link_match_minimum_response_fine: 0.1    # Minimum match response (score) when doing fine matching of scan links.
    link_scan_maximum_distance: 1.5          # Maximum distance (m) to consider a scan point for link matching.
    loop_search_maximum_distance: 3.0        # Max distance (m) to search for potential loop closures.
    do_loop_closing: true                    # Enable automatic loop closure detection and optimization.
    loop_match_minimum_chain_size: 10        # Minimum chain length (number of matching frames) to accept a loop candidate.
    loop_match_maximum_variance_coarse: 3.0  # Max allowed variance for coarse loop-match acceptance.
    loop_match_minimum_response_coarse: 0.35 # Minimum response/score for accepting a coarse loop match candidate.
    loop_match_minimum_response_fine: 0.45   # Minimum response/score for accepting a fine loop match after refinement.
    
    # Correlation Parameters - Correlation Parameters
    correlation_search_space_dimension: 0.5       # Search radius (m) around predicted pose for scan correlation.
    correlation_search_space_resolution: 0.01     # Resolution (m) of the correlation search grid.
    correlation_search_space_smear_deviation: 0.1 # Smear (Gaussian) deviation to widen correlation score (accounts for noise).
    
    # Loop Closure Parameters
    loop_search_space_dimension: 8.0        # Spatial radius (m) to search for loop closure candidates.
    loop_search_space_resolution: 0.05      # Grid resolution (m) used when evaluating loop closure candidates.
    loop_search_space_smear_deviation: 0.03 # Smear deviation for loop-search correlation (tolerance for match).
    
    # Scan Matcher Parameters
    distance_variance_penalty: 0.5      # Penalty factor for distance discrepancies in scan matching (affects scoring).
    angle_variance_penalty: 1.0         # Penalty factor for angular discrepancies in scan matching.
    
    fine_search_angle_offset: 0.00349    # Small angular offset (rad) used during fine-angle search (refinement).
    coarse_search_angle_offset: 0.349    # Angular offset (rad) used during coarse-angle search (rough alignment).
    coarse_angle_resolution: 0.0349      # Angular resolution (rad) for coarse angle search.
    minimum_angle_penalty: 0.9           # Minimum penalty applied for angle mismatches (affects acceptance threshold).
    minimum_distance_penalty: 0.5        # Minimum penalty for distance mismatches between scans.
    use_response_expansion: true         # If true, expand/propagate high-match responses to nearby poses (helps robust matching).

